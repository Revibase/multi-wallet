/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  combineCodec,
  getStructDecoder,
  getStructEncoder,
  getU16Decoder,
  getU16Encoder,
  getU8Decoder,
  getU8Encoder,
  type FixedSizeCodec,
  type FixedSizeDecoder,
  type FixedSizeEncoder,
} from "gill";

/**
 * Rent function parameters,
 * used to calculate whether the account is compressible.
 */
export type RentConfig = {
  /** Base rent constant: rent = base_rent + num_bytes * lamports_per_byte_per_epoch */
  baseRent: number;
  compressionCost: number;
  lamportsPerBytePerEpoch: number;
  maxFundedEpochs: number;
  /**
   * Maximum lamports that can be charged per top-up operation.
   * Protects against griefing by accounts with high lamports_per_write.
   */
  maxTopUp: number;
};

export type RentConfigArgs = RentConfig;

export function getRentConfigEncoder(): FixedSizeEncoder<RentConfigArgs> {
  return getStructEncoder([
    ["baseRent", getU16Encoder()],
    ["compressionCost", getU16Encoder()],
    ["lamportsPerBytePerEpoch", getU8Encoder()],
    ["maxFundedEpochs", getU8Encoder()],
    ["maxTopUp", getU16Encoder()],
  ]);
}

export function getRentConfigDecoder(): FixedSizeDecoder<RentConfig> {
  return getStructDecoder([
    ["baseRent", getU16Decoder()],
    ["compressionCost", getU16Decoder()],
    ["lamportsPerBytePerEpoch", getU8Decoder()],
    ["maxFundedEpochs", getU8Decoder()],
    ["maxTopUp", getU16Decoder()],
  ]);
}

export function getRentConfigCodec(): FixedSizeCodec<
  RentConfigArgs,
  RentConfig
> {
  return combineCodec(getRentConfigEncoder(), getRentConfigDecoder());
}
